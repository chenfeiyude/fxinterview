{% extends "main/base.html" %}

{% block title %}Profile{% endblock %}

{% block content %}

{% include "main/includes/form_error.html" %}

<div class="container">

      <div class="page-header">
        <h3>
            Profile
        </h3>
    </div>

    <div class="panel panel-default">
        <div class="panel-heading">
             <h3 class="panel-title">{{ user.username }}</h3>
        </div>
        <div class="panel-body">
            <form id="profile_form" method="POST" action="{% url 'main:update_profile' %}">
                {% csrf_token %}

                {% load widget_tweaks %}

                <div class="form-group input-container input-group">
                     <span class="input-group-addon">First Name</span>
                    {% render_field form.first_name class="form-control" placeholder="First Name" value=user.first_name %}
                </div>

                <div class="form-group input-container input-group">
                    <span class="input-group-addon">Last Name</span>
                    {% render_field form.last_name class="form-control" placeholder="Last Name" value=user.last_name%}
                </div>

                <div class="form-group input-container input-group">
                    <span class="input-group-addon"><i class="fa fa-envelope-o fa-fw"></i>Email</span>
                    {% render_field form.email class="form-control" placeholder="Email address" value=user.email%}
                </div>

                {% render_field form.username value=user.username %}

                <p>
                    <input type="submit" class="btn btn-primary" value="Update">
                    <a class="btn btn-primary" href="{% url 'password_change' %}">Change password</a>
                </p>
            </form>
        </div>
    </div>

    {% if interviewers %}
     <div class="panel panel-default">
        <div class="panel-heading">
             <h3 class="panel-title">Manage Interviewers</h3>
        </div>
        <div class="panel-body">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Username</th>
                        <th>Email</th>
                        <th>Role</th>
                        <th>Activited</th>
                        <th>Last Login</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for interviewer in interviewers %}
                        <tr>
                            <td>{{ interviewer.username }}</td>
                            <td>{{ interviewer.email }}</td>
                            <td>
                                {% if interviewer.profile.role == 1 %}
                                   Admin
                                 {% else %}
                                    Interviewer
                                {% endif %}
                            </td>
                            <td>
                                 {% if interviewer.is_active %}
                                   Yes
                                 {% else %}
                                   No
                                {% endif %}
                            </td>
                            <td>{{ interviewer.last_login |date:"Y-m-d H:i"}}</td>
                            <td>
                                <a href="{% url 'main:edit_interviewer'%}?id={{ interviewer.id }}">
                                    <i class="fa fa-pencil-square-o fa-2x" aria-hidden="true"></i>
                                 </a>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
     </div>
    {% endif %}
</div>

{% load static %}
<script src='{% static "main/js/view_profile.js" %}' type="text/javascript" charset="utf-8"></script>
{% endblock %}
